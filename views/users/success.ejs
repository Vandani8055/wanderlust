<% layout('layouts/boilerplate') %>



<style>
  .glass-card {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.4);
  }

  .confetti-svg {
    position: absolute;
    z-index: 0;
    opacity: 0.3;
    pointer-events: none;
  }

  .pulsing-glow {
    box-shadow: 0 0 0 0 rgba(41, 201, 120, 0.4);
    animation: pulse-green 2s infinite;
  }

  @keyframes pulse-green {
    0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(41, 201, 120, 0.7); }
    70% { transform: scale(1); box-shadow: 0 0 0 15px rgba(41, 201, 120, 0); }
    100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(41, 201, 120, 0); }
  }

  .success-page-body {
    background: radial-gradient(circle at top right, #f3e8ff, #ffffff);
  }
</style>

<div class="success-page-body font-display min-h-screen relative overflow-x-hidden flex flex-col">
  
  <div class="absolute top-10 left-5 text-emerald-success confetti-svg"><span class="material-symbols-outlined text-3xl">celebration</span></div>
  <div class="absolute top-32 right-10 text-electric-blue confetti-svg"><span class="material-symbols-outlined text-2xl">star</span></div>
  <div class="absolute bottom-10 left-10 text-primary/20 confetti-svg"><span class="material-symbols-outlined text-5xl">circle</span></div>

  <main class="flex-1 flex items-center justify-center p-4 md:p-6 z-10">
    <div class="max-w-[550px] w-full glass-card rounded-3xl p-6 md:p-10 shadow-2xl relative">
      
      <div class="flex flex-col items-center text-center mb-8">
        <div class="size-16 md:size-20 bg-emerald-success/10 rounded-full flex items-center justify-center mb-4 pulsing-glow">
          <span class="material-symbols-outlined text-emerald-success text-4xl md:text-5xl font-bold">check_circle</span>
        </div>
        <h1 class="text-primary text-2xl md:text-3xl font-extrabold tracking-tight mb-2">Payment Successful</h1>
        <p class="text-slate-600 text-base">Your booking has been confirmed ðŸŽ‰</p>
      </div>

      <div class="bg-white/50 border border-slate-100 rounded-2xl overflow-hidden mb-8 shadow-sm">
        <div class="flex flex-col sm:flex-row items-center p-4 gap-4 border-b border-slate-100">
          <% if (listing.image && listing.image.url) { %>
            <div class="w-full sm:w-20 h-24 sm:h-20 rounded-xl bg-cover bg-center" style="background-image: url('<%= listing.image.url %>');"></div>
          <% } %>
          <div class="text-center sm:text-left">
            <h3 class="text-slate-900 text-lg font-bold leading-tight"><%= listing.title %></h3>
            <p class="text-primary text-sm font-medium"><%= listing.location %>, <%= listing.country %></p>
          </div>
        </div>

        <div class="p-5 space-y-3">
          <div class="flex justify-between items-center">
            <span class="text-slate-500 text-xs font-bold uppercase tracking-widest">Check-In</span>
            <span class="text-slate-900 font-semibold"><%= checkIn %></span>
          </div>
          <div class="flex justify-between items-center border-t border-slate-50 pt-3">
            <span class="text-slate-500 text-xs font-bold uppercase tracking-widest">Check-Out</span>
            <span class="text-slate-900 font-semibold"><%= checkOut %></span>
          </div>
        </div>
      </div>

      <div class="flex flex-col gap-3">
        <a href="/listings/<%= listing._id %>" 
           class="w-full h-14 rounded-2xl bg-gradient-to-r from-electric-blue to-primary text-white font-bold text-lg shadow-lg hover:shadow-primary/30 hover:scale-[1.01] transition-all flex items-center justify-center gap-2 group">
          Back to Listing
          <span class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_forward</span>
        </a>
        
        <button onclick="window.print()" class="w-full py-3 text-slate-500 font-semibold text-sm hover:text-primary transition-colors flex items-center justify-center gap-2">
          <span class="material-symbols-outlined text-lg">print</span>
          Print Receipt
        </button>
      </div>

      <div class="mt-8 text-center border-t border-slate-100 pt-6">
        <p class="text-slate-400 text-xs tracking-wide">
          A confirmation email has been sent to your registered address.
          <br>
          Â© 2026 Wanderlust Global Inc.
        </p>
      </div>
    </div>
  </main>
</div>